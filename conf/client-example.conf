#### block cache
# {
# --cache_store:
#   cache store type, none, disk or 3fs
#
# --stage_bandwidth_throttle_enable:
#   block will been put to s3 storage directly if disk write bandwidth
#   exceed limit.
#
# --cache_dir:
#   directory for store cache block, multi directories
#   and corresponding max size are supported, e.g. "/data1:200;/data2:300"
#
# --ioring_iodepth:
#   iodepth for io ring (works for both linux io uring and 3fs usrbio)
--cache_store=disk
--enable_stage=true
--enable_cache=true
--cache_trace_logging=true
--upload_stage_throttle_enable=false
--upload_stage_throttle_bandwidth_mb=256
--upload_stage_throttle_iops=100
--upload_stage_max_inflights=32
--prefetch_max_inflights=100
--storage_upload_retry_timeout_s=1800
--storage_download_retry_timeout_s=1800

--cache_dir=.
--cache_size_mb=102400
--free_space_ratio=0.1
--cache_expire_s=259200
--cleanup_expire_interval_ms=1000
--ioring_iodepth=128

--disk_state_tick_duration_s=60
--disk_state_normal2unstable_error_num=3
--disk_state_unstable2normal_succ_num=10
--disk_state_unstable2down_s=1800
--disk_state_check_duration_ms=3000
# }

#### remote cache
--cache_group=
--mds_rpc_timeout_ms=3000
--mds_rpc_retry_times=1
--mds_request_retry_times=3
--load_members_interval_ms=1000

--fill_group_cache=true
--subrequest_range_size=1048576
--rpc_connect_timeout_ms=1000
--rpc_connect_timeout_as_unreachable=10
--rpc_max_connection_pool_size=256
--put_rpc_timeout_ms=30000
--range_rpc_timeout_ms=30000
--cache_rpc_timeout_ms=30000
--prefetch_rpc_timeout_ms=3000
--ping_rpc_timeout_ms=1000
--rpc_max_retry_time=3
--rpc_max_timeout_ms=60000

--cache_node_state_tick_duration_s=30
--cache_node_state_normal2unstable_error_num=10
--cache_node_state_unstable2normal_succ_num=3
--cache_node_state_check_duration_ms=3000

#### control fuse module
# fuse.conn_info.*:
#   Connnection information, one instance per mountpoint
#
# fuse.file_info.*:
#   Information about an open file, one instance per open file
#
# fuse.conn_info.want_splice_*:
#   splice will bring higher performance in some cases
#   but there might be a kernel issue that will cause kernel panic when enabling it
#   see https://lore.kernel.org/all/CAAmZXrsGg2xsP1CK+cbuEMumtrqdvD-NKnWzhNcvn71RV3c1yw@mail.gmail.com/
#   until this issue has been fixed, splice should be disabled
--fuse_conn_info_want_splice_move=false
--fuse.conn_info_want_splice_read=false
--fuse.conn_info_want_splice_write=false
--fuse_conn_info_want_auto_inval_data=true
--fuse_file_info_direct_io=false
--fuse_file_info_keep_cache=true
--fuse_mount_options=default_permissions,allow_other
--fuse_max_threads=64

#### Memrory page allocator
--data_stream_page.size=65536
--data_stream_page.total_size_mb=1024
--data_stream_page.use_pool=true

#### aws sdk
--s3_region=us-east-1
--s3_use_virtual_address=false
# Off = 0,Fatal = 1,Error = 2,Warn = 3,Info = 4,Debug = 5,Trace = 6
--s3_loglevel=4
--s3_verify_ssl=False
--s3_max_connections=32
--s3_connect_timeout=60000
--s3_request_timeout=10000
--s3.use_crt_client=true
# this only work when use_crt_client is false
--s3_use_thread_pool=false
# this only work when use_crt_client is false and use_thread_pool is true
--s3_async_thread_num=256
--s3_enable_telemetry=false

#### block throttle
--iops_total_limit=0
--iops_read_limit=0
--iops_write_limit=0
--io_bandwidth_total_mb=0
--io_bandwidth_read_mb=0
--io_bandwidth_write_mb=0
# limit all inflight async requests' bytes, |0| means not limited
--io_max_inflight_async_bytes=104857600

###  unix domain socket file path
--socket_path=/var/run/

### block access related options
--rados_op_timeout=120

### vfs data related options

# vfs.data.writeback_suffix:
#   file with the specified suffix will use writeback write policy,
#   multi suffixs supported, e.g. .pt:.ckpt
--vfs_data_writeback_suffix=
--vfs_data_writeback=false
--vfs_flush_bg_thread=16
--vfs_periodic_flush_interval_ms=100

--vfs_read_executor_thread=8

#prefetch config
--vfs_prefetch_blocks=1
--vfs_prefetch_threads=8

# warmup config
--vfs_warmup_threads=4
--vfs_intime_warmup_enable=false
--vfs_warmup_mtime_restart_interval_secs=120
--vfs_warmup_trigger_restart_interval_secs=1800


### vfs meta related options
--vfs_meta_max_name_length=255

# Default 0, the worker num of bthread whill be #cpu-cores
--vfs_bthread_worker_num=0
--vfs_dummy_server_port=10000

--vfs_trace_logging=false

# related access loggging
--vfs_access_logging=true
--vfs_access_log_threshold_us=0
--vfs_meta_access_logging=true
--vfs_meta_access_log_threshold_us=1000

#### log related
--vfs_log_dir=/data/logs/dingofs
# as the number increases, it becomes more and more detailed
--vfs_log_level=0